<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stars Pointer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <script type="module" crossorigin src="/Stars/assets/index-CUSsOSiY.js"></script>
    <link rel="stylesheet" crossorigin href="/Stars/assets/index-DVdohjtu.css">
  </head>
  <body>
    <div id="app">
      <!-- Permission / Start Screen -->
      <div id="start-screen" class="screen active">
        <h1>✨ Stars ✨</h1>
        <p class="subtitle">Celestial Pointer</p>
        <div class="doodle-box instruction-box">
          <p>Point your phone at the sky to find planets and stars!</p>
          <p>We need your location and device sensors.</p>
        </div>
        <button id="start-btn" class="doodle-btn">Enable Sensors & Start</button>
        <div id="permission-status"></div>
        <div id="permission-retry" class="hidden" style="margin-top: 20px; text-align: center;">
          <p style="font-size: 0.9rem; margin-bottom: 10px;">If you denied permission, you might need to refresh the page or check your browser settings.</p>
          <button id="retry-btn" class="small-btn">Try Again</button>
        </div>
      </div>

      <!-- List Screen -->
      <div id="list-screen" class="screen hidden">
        <header>
          <h2>Objects</h2>
          <div class="location-status">
            <span id="loc-latlon">Locating...</span>
          </div>
        </header>
        <div id="objects-list" class="scroll-container">
          <!-- Items will be injected here -->
        </div>
        <footer class="doodle-footer">
          <button id="calibrate-btn" class="small-btn">Set North</button>
          <button id="muhurat-btn" class="small-btn">Muhurat</button>
          <button id="debug-toggle" class="small-btn">Debug</button>
        </footer>
      </div>

      <!-- Muhurta Screen -->
      <div id="muhurta-screen" class="screen hidden">
        <div class="top-bar">
          <button id="muhurta-back-btn" class="doodle-btn back-btn">← Back</button>
          <h2>Muhurta</h2>
        </div>
        <div class="date-controls doodle-box" style="display:flex; justify-content:space-between; align-items:center; width:90%; padding: 5px 15px; margin-bottom:10px;">
          <button id="prev-day" class="small-btn">prev</button>
          <span id="current-date-display" style="font-weight:bold;">Today</span>
          <button id="next-day" class="small-btn">next</button>
        </div>
        <div id="muhurta-list" class="scroll-container">
          <!-- Items injected here -->
        </div>
      </div>

      <!-- Pointer Screen -->
      <div id="pointer-screen" class="screen hidden">
        <div class="top-bar">
          <button id="back-btn" class="doodle-btn back-btn">← Back</button>
          <div class="current-orientation">
            <p id="orientation-display">Facing: --°, Tilt: --°</p>
          </div>
        </div>
        
        <div class="target-info">
          <h2 id="target-name">Mars</h2>
          <p id="target-coords">Alt: 45° Az: 180°</p>
        </div>

        <div class="guidance-text">
          <p id="turn-msg">Turn LEFT 30°</p>
          <p id="tilt-msg">Tilt UP 10°</p>
        </div>

        <div class="pointer-container">
          <!-- Arrow or Checkmark -->
          <div id="pointer-arrow" class="doodle-arrow">➤</div>
          <div id="lock-indicator" class="hidden">
            <div class="check-mark">✔</div>
            <div class="look-now">LOOK NOW</div>
          </div>
        </div>
        
        <div id="status-message" class="warning-msg hidden"></div>
      </div>

      <!-- Calibration Modal -->
      <div id="calibration-modal" class="modal hidden">
        <div class="modal-content doodle-box">
          <h3>Calibrate North</h3>
          <p>Point your phone at TRUE NORTH and tap "Set".</p>
          <div style="display: flex; gap: 10px; flex-direction: column;">
            <button id="set-north-btn" class="doodle-btn">Set North</button>
            <button id="set-horizon-btn" class="doodle-btn">Set Horizon (at Horizon)</button>
            <button id="close-cal-btn" class="doodle-btn secondary">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Debug Overlay -->
      <div id="debug-overlay" class="hidden">
        <pre id="debug-log"></pre>
      </div>
    </div>
  </body>
</html>

